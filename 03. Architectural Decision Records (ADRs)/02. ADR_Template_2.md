# ADR [number]: [Short, Descriptive Title]

**Date:** [YYYY-MM-DD]  
**Status:** [Proposed | Accepted | Superseded | Rejected]  
**Author:** [Your Name]  
**Tags:** [django, frappe, erpnext, api, workflow, integration]

---

## 1. Context

Describe the background or problem you‚Äôre solving.

- What challenge led to this decision?
- What system(s) does it affect (Django / Frappe / Integration / Database)?
- Are there technical, business, or security constraints?

_Example:_  
Payroll recalculation must trigger automatically when an employee‚Äôs leave is approved in Frappe.  
Options include using Django signals, Frappe hooks, or an API-based queue.

---

## 2. Decision

State your chosen solution clearly and concisely.

- What are you doing?
- What patterns or technologies are being used?

_Example:_  
We will use **Django signals** connected to the `LeaveApproval` model to trigger a recalculation task.  
The signal will send a REST call to Frappe to update Doctype `Salary Slip`.

---

## 3. Implementation Details

Outline any technical or structural notes.

- How it‚Äôs implemented (models, APIs, background tasks, hooks)
- Dependencies (Celery, Frappe Workflow, ERPNext APIs)
- Configuration or environment implications

_Example:_  
- Signal handler in `payroll.signals.py`  
- API endpoint `/api/salary/recalculate` exposed on Frappe side  
- Requires valid Frappe API key/secret stored in Django `.env`

---

## 4. Consequences

Document trade-offs and implications.

| Type | Notes |
|------|-------|
| ‚úÖ **Positive** | Real-time synchronization between Frappe and Django |
| ‚ö†Ô∏è **Negative** | Tighter coupling between services |
| üîß **Maintenance** | Signal logic must be updated when Leave model changes |
| üîí **Security** | Requires proper token authentication in API calls |

---

## 5. Alternatives Considered

List options you didn‚Äôt choose and briefly explain why.

| Option | Pros | Cons | Decision |
|---------|------|------|-----------|
| Frappe Hook | Native, simple | Harder to test, ties logic to Frappe | ‚ùå |
| Celery Task | Async and reliable | Requires queue infra (Redis, Celery) | ‚ùå |
| Django Signal | Lightweight, inline | Slightly tighter coupling | ‚úÖ |

---

## 6. Integration Impact

Describe any cross-system or ERPNext effects.

- Doctypes or modules impacted (e.g., `Leave Application`, `Salary Slip`)
- Any Frappe API endpoints exposed or consumed
- Any Django models updated or triggered

---

## 7. References / Links

- [Related ADRs](../0001-use-django-signals.md)
- [Code PR / Commit](https://github.com/<yourusername>/<repo>/pull/XX)
- [Frappe DocType: Salary Slip](https://frappeframework.com/docs/user/en/api/doctype)

---

## 8. Status Updates

Track changes to this decision over time.

| Date | Change | Notes |
|------|---------|-------|
| [YYYY-MM-DD] | Accepted | Initial decision made |
| [YYYY-MM-DD] | Superseded by ADR-00X | Moved to async queue architecture |
