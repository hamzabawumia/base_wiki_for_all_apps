Example Real ADR (using the template)
# ADR 003: Use Frappe Webhooks to Trigger Payroll Sync

**Date:** 2025-11-08  
**Status:** Accepted  
**Author:** Sam Developer  
**Tags:** [frappe, webhook, django, integration]

---

## 1. Context
Payroll needs to sync automatically from Frappe to Django whenever a new `Salary Slip` is submitted.  
Options considered include:
- Using Django scheduled tasks
- Using Frappe hooks
- Using Frappe webhooks to call Django API endpoints

---

## 2. Decision
We will use **Frappe Webhooks** to notify Django when a `Salary Slip` is created or updated.

---

## 3. Implementation Details
- Frappe Webhook on Doctype `Salary Slip`  
- Target URL: `/api/v1/payroll/sync/` on Django  
- Authentication: custom API key header  
- Django endpoint updates payroll records in local DB.

---

## 4. Consequences
| Type | Notes |
|------|-------|
| ‚úÖ **Positive** | Near real-time sync with minimal latency |
| ‚ö†Ô∏è **Negative** | Frappe downtime will delay sync |
| üîß **Maintenance** | Need to version the Django API endpoint |

---

## 5. Alternatives Considered
| Option | Pros | Cons | Decision |
|---------|------|------|-----------|
| Celery Polling | Decoupled, async | Higher load, polling delay | ‚ùå |
| Frappe Hook | Simple but internal | Harder to maintain cross-framework | ‚ùå |
| Frappe Webhook | Built-in, clean, scalable | Depends on Frappe uptime | ‚úÖ |

---

## 6. Integration Impact
- Doctype: `Salary Slip`
- Django endpoint: `/api/v1/payroll/sync/`
- Requires shared secret key in both systems

---

## 7. References
- [ERPNext Webhook Docs](https://frappeframework.com/docs/user/en/api/webhooks)
- [PR #42: Add Payroll Webhook Handler](https://github.com/myorg/myapp/pull/42)

---

## 8. Status Updates
| Date | Change | Notes |
|------|---------|-------|
| 2025-11-08 | Accepted | Initial implementation completed |
